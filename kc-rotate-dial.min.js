/*KAISARCODE ROTATE DIAL ****************************************************
*                                                                           *
*    Copyright (C) 2006 - 2016  KaisarCode.com                              *
*                                                                           *
*    This program is free software: you can redistribute it and/or modify   *
*    it under the terms of the GNU Lesser General Public License as         *
*    published by the Free Software Foundation, either version 3 of the     *
*    License, or (at your option) any later version.                        *
*                                                                           *
*    This program is distributed in the hope that it will be useful,        *
*    but WITHOUT ANY WARRANTY; without even the implied warranty of         *
*    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the          *
*    GNU Lesser General Public License for more details.                    *
*                                                                           *
*    You should have received a copy of the GNU General Public License      *
*    along with this program.  If not, see <http://www.gnu.org/licenses/>.  *
*                                                                           *
*****************************************************************************/

var kcRotateDial=function(b){function k(d){for(var a=d,c=a.offsetLeft,b=a.offsetTop;a=a.offsetParent;)c+=a.offsetLeft;for(a=d;a=a.offsetParent;)b+=a.offsetTop;return[c,b]}function x(a){var e;k(b);f=[b.offsetWidth,b.offsetHeight];l=[k(b)[0]+b.offsetWidth/2,k(b)[1]+b.offsetHeight/2];var c;window.event&&(a=window.event);a.clientX&&(c=[a.clientX,a.clientY]);a.pageX&&(c=[a.pageX,a.pageY]);try{a.targetTouches[0]&&(c=[a.targetTouches[0].pageX,a.targetTouches[0].pageY])}catch(g){}m=c;try{e=Math.atan2(m[1]-
l[1],m[0]-l[0])}catch(g){}e+=1.5707963267948966;0>e&&(e+=6.283185307179586);return e}function g(a,b){if(b){var c=a;window.event&&(c=window.event);c.preventDefault?c.preventDefault():c.returnValue=!1;c=a;window.event&&(c=window.event);c.stopPropagation?c.stopPropagation():c.bubbles=!1;n=x(a);p=!0}else p=!1}function q(d){if(p){var e;e=x(d);d=r+(e-n);isNaN(d)&&(d=r);0>d&&(d=6.283185307179586);6.283185307179586<d&&(d=0);n=e;b.style.transform="rotate("+d+"rad)";b.style.MozTransform="rotate("+d+"rad)";
b.style.WebkitTransform="rotate("+d+"rad)";b.style.OTransform="rotate("+d+"rad)";b.style.MsTransform="rotate("+d+"rad)";var c=Math.cos(e);e=Math.sin(e);t=-(f[0]/2)*c+f[1]/2*e+f[0]/2;u=-(f[0]/2)*e-f[1]/2*c+f[1]/2;b.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11 = "+c+", M12 = "+-e+", M21 = "+e+", M22 = "+c+", Dx = "+t+", Dy = "+u+", SizingMethod = auto expand)";b.style.msFilter="progid:DXImageTransform.Microsoft.Matrix(M11 = "+c+", M12 = "+-e+", M21 = "+e+", M22 = "+c+", Dx = "+t+", Dy = "+
u+", SizingMethod = auto expand)";a.rad=d;a.deg=360*a.rad/(2*Math.PI);a.per=100*a.rad/6.283185307179586;100>=h&&60<=h&&0<=a.per&&30>=a.per&&a.spin++;30>=h&&0<=h&&60<=a.per&&100>=a.per&&a.spin--;a.fullRad=a.rad+6.283185307179586*a.spin;a.fullDeg=a.deg+360*a.spin;a.fullPer=a.per+100*a.spin;v<a.fullRad&&(a.clock=!0);v>a.fullRad&&(a.clock=!1);r=d;h=a.per;v=a.fullRad;a.onchange()}}var a={};document.all&&!window.opera&&b.setAttribute("unselectable","on");a.rad=0;a.deg=0;a.per=0;a.fullRad=0;a.fullDeg=0;
a.fullPer=0;a.spin=0;var p=a.clock=!1,f=[],l=[],m=[],n=0,r=0,h=0,v=0,t,u,w;a.onchange=function(){};if(b.attachEvent)b.attachEvent("onmousedown",function(){g(0,!0)}),document.attachEvent("onmouseup",function(){g(0,!1)}),document.attachEvent("onmousemove",function(){q(0)});else if(b.addEventListener){b.addEventListener("mousedown",function(a){g(a,!0)});document.addEventListener("mouseup",function(a){g(a,!1)});document.addEventListener("mousemove",function(a){q(a)});try{document.addEventListener("touchend",
function(a){g(a,!1)})}catch(d){}try{document.addEventListener("touchmove",function(a){q(a)})}catch(d){}}w=document.createElement("div");w.innerHTML="\x3c!--[if gte IE 9]><br /><![endif]--\x3e";1==w.getElementsByTagName("br").length&&(b.style.filter="none");return a};
